- name: Install and setting up nginx
  hosts: Web
  become: yes
  tasks:
  - name: Install Nginx
    ansible.builtin.package:
      name: nginx
      state: present
  
  - name: Start and enable nginx
    ansible.builtin.service:
      name: nginx
      state: started
      enabled: yes

  - name: Remove the default content that web server is serving
    ansible.builtin.file:
      path: /usr/share/nginx/html
      state: absent
  
  - name: Create the html directory in /usr/share/nginx
    ansible.builtin.file:
      path: /usr/share/nginx/html
      state: directory

  - name: Unarchive a file that needs to be downloaded (added in 2.0)
    ansible.builtin.unarchive:
      src: https://roboshop-builds.s3.amazonaws.com/web.zip
      dest: /usr/share/nginx/html
      remote_src: yes

  